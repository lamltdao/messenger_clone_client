[{"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/index.js":"1","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/routes/LoginSecuredRoute.js":"2","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/contexts/AuthProvider.js":"3","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/contexts/ThemeProvider.js":"4","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/contexts/VideoCallProvider.js":"5","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/video_call/VideoCall.js":"6","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/nav_bar/LogOut.js":"7","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/dashboard/sidebar/Searchfield.js":"8","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/Register.js":"9","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/routes/HomeSecuredRoute.js":"10","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/contexts/SocketProvider.js":"11","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/dashboard/ConversationDetail.js":"12","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/dashboard/sidebar/ConversationList.js":"13"},{"size":423,"mtime":1627356949044,"results":"14","hashOfConfig":"15"},{"size":589,"mtime":1627356949044,"results":"16","hashOfConfig":"15"},{"size":2766,"mtime":1627356949041,"results":"17","hashOfConfig":"15"},{"size":1298,"mtime":1627356949043,"results":"18","hashOfConfig":"15"},{"size":4054,"mtime":1627356949043,"results":"19","hashOfConfig":"15"},{"size":2917,"mtime":1627356949041,"results":"20","hashOfConfig":"15"},{"size":935,"mtime":1627356949039,"results":"21","hashOfConfig":"15"},{"size":349,"mtime":1627356949039,"results":"22","hashOfConfig":"15"},{"size":2240,"mtime":1627356949036,"results":"23","hashOfConfig":"15"},{"size":619,"mtime":1627356949044,"results":"24","hashOfConfig":"15"},{"size":1964,"mtime":1627374836623,"results":"25","hashOfConfig":"15"},{"size":4949,"mtime":1627356949037,"results":"26","hashOfConfig":"15"},{"size":1517,"mtime":1627356949038,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1ilr6m7",{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32","usedDeprecatedRules":"33"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"36","messages":"37","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"40","messages":"41","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"42","messages":"43","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"44"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"51","messages":"52","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"53","usedDeprecatedRules":"33"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"56","usedDeprecatedRules":"33"},{"filePath":"57","messages":"58","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/index.js",[],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/routes/LoginSecuredRoute.js",["59"],"import React from 'react'\nimport {Route, Redirect} from 'react-router-dom'\nimport useLocalStorage from '../hooks/useLocalStorage';\n\nexport default function LoginSecuredRoute({ children, ...rest }) {\n  let [refreshToken, setRefreshToken] = useLocalStorage('refresh_token', null) \n  return (\n      <Route\n        {...rest}\n        render={({ location }) =>\n          refreshToken !== null ? (\n            <Redirect\n              to={{\n                pathname: \"/\",\n                state: { from: location }\n              }}\n            />\n          ) : children\n        }\n      />\n    );\n}\n",["60","61"],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/contexts/AuthProvider.js",[],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/contexts/ThemeProvider.js",["62","63"],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/contexts/VideoCallProvider.js",[],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/video_call/VideoCall.js",["64","65"],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/nav_bar/LogOut.js",[],["66","67"],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/dashboard/sidebar/Searchfield.js",[],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/Register.js",[],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/routes/HomeSecuredRoute.js",["68"],"/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/contexts/SocketProvider.js",["69"],"import React, { useContext, useEffect, useState } from \"react\";\nimport io from \"socket.io-client\";\nimport { useUserContext } from \"./UserProvider\";\nimport { CONVERSATION_BASE_URL } from \"../config\";\n\nconst SocketContext = React.createContext();\n\nexport function useSocket() {\n  return useContext(SocketContext);\n}\nexport function SocketProvider({ children }) {\n  const [chatSocket, setChatSocket] = useState();\n\n  const [videoCallSocket, setVideoCallSocket] = useState(false);\n  const [isInitVideoCallSocket, setIsInitVideoCallSocket] = useState(false);\n  const [isVideoCallSocketConnected, setIsVideoCallSocketConnected] =\n    useState(false);\n\n  const { user } = useUserContext();\n  const userId = user._id;\n  useEffect(() => {\n    if (!user) return;\n    var newChatSocket = io(`${CONVERSATION_BASE_URL}/chat`, {\n      query: {\n        userId,\n      },\n    });\n    setChatSocket(newChatSocket);\n    return () => {\n      if (newChatSocket) newChatSocket.close();\n    };\n  }, [userId]);\n\n  useEffect(() => {\n    if (isInitVideoCallSocket) {\n      console.log(\"init video call socket\");\n      var newVideoCallSocket = io(`${CONVERSATION_BASE_URL}/video-call`, {\n        query: {\n          userId,\n        },\n      });\n      setVideoCallSocket(newVideoCallSocket);\n    }\n    return () => {\n      if (newVideoCallSocket) {\n        console.log(\"cleaning up\");\n        newVideoCallSocket.close();\n      }\n    };\n  }, [userId, isInitVideoCallSocket]);\n\n  useEffect(() => {\n    videoCallSocket &&\n      videoCallSocket.on(\"connect\", () => {\n        console.log(\"video call socket connected\");\n        console.log(videoCallSocket);\n        setIsVideoCallSocketConnected(true);\n        setIsInitVideoCallSocket(false);\n      });\n  }, [videoCallSocket]);\n\n  const value = {\n    videoCallSocket,\n    chatSocket,\n    isVideoCallSocketConnected,\n    setIsInitVideoCallSocket,\n  };\n  return (\n    <SocketContext.Provider value={value}>{children}</SocketContext.Provider>\n  );\n}\n","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/dashboard/ConversationDetail.js",["70"],"import React, {useState, useCallback} from 'react'\nimport {CLIENT_BASE_URL} from '../../config'\nimport {useThemeContext, themeOptions} from '../../contexts/ThemeProvider'\nimport {Form, InputGroup, Button, DropdownButton, Dropdown } from 'react-bootstrap'\nimport {useConversations} from '../../contexts/ConversationProvider'\nimport {useUserContext} from '../../contexts/UserProvider'\n\nexport default function ConversationDetail() {\n    // set theme\n    const {theme, setTheme} = useThemeContext()\n    \n    // get conversation info\n    const {sendMessage, selectedConversationId, conversations} = useConversations()\n    const conversation = selectedConversationId === null ? null : conversations.find(conversation => conversation._id === selectedConversationId)\n    // get user info \n    const {user, contacts} = useUserContext()\n    const userId = user._id\n    // \n    const [text, setText] = useState('')\n\n    // scroll to last message sent\n    const setRef = useCallback(node => {\n        if(node) {\n            node.scrollIntoView({smooth : true})\n        }\n    },[])\n    \n    // send message when clicked 'Send' button\n    function handleSubmit(e) {\n        e.preventDefault()\n        if(text !== '') {\n            sendMessage(selectedConversationId, user, text)\n            setText('') \n        }\n    }\n    // join a video call\n    function handleClick(e) {\n        e.preventDefault()\n        window.open(CLIENT_BASE_URL + `/video-call/${selectedConversationId}`)    \n    }\n    return (\n        conversation ? \n\n        <div className = {`d-flex flex-column flex-grow-1 ${theme.backgroundColor}`} style = {{height: '100%'}}>\n            <div className = 'd-flex flex-row justify-content-end'>\n                <DropdownButton title = 'Choose your theme' className='mr-2' variant={theme.commonButtonColor}>\n                    {\n                        themeOptions.map((theme, index) => {\n                            return (\n                            <Dropdown.Item key = {index} onClick = {() => {setTheme(theme)}}>{theme.name}</Dropdown.Item>                            )\n                        })\n                    }\n                </DropdownButton>\n                <Button onClick = {handleClick} className='mr-2' variant={theme.commonButtonColor}>Video Call</Button>\n            </div>\n            \n            <div className = 'flex-grow-1 overflow-auto'>\n                <div className = 'd-flex flex-column align-items-start justify-content-end px-3'>\n                    { \n                    conversation.messages.map((message, index) => {\n                        const lastMessage = conversation.messages.length - 1 === index\n                        const senderInfo = message.user\n                        const isSentFromMe = senderInfo._id === userId\n                        const {messageBody} = message\n                        return (\n                            <div \n                                ref = {lastMessage ? setRef : null}\n                                key = {index}\n                                className = {`my-1 d-flex flex-column ${isSentFromMe ? 'align-self-end align-items-end' : 'align-items-start'}`}\n                            >\n                                {\n                                    // set color of message box and sender's name depending on the sender (user or his/her contacts)\n                                }\n                                <div className = {`rounded px-2 py-1 \n                                                    ${isSentFromMe ? theme.myTextBoxColor : theme.otherTextBoxColor}`}\n                                >\n                                    {messageBody}\n                                </div>\n\n                                <div className = {`text-muted small ${isSentFromMe ? 'text-right' : ''}`}>\n                                    {isSentFromMe ? 'You' : senderInfo.name}\n                                </div>\n                            </div>\n                        )\n                    })\n                }\n                </div>\n            </div>  \n            <Form onSubmit = {handleSubmit}>\n                <Form.Group className = 'm-2'>\n                    <InputGroup>\n                        <Form.Control \n                        as = 'textarea'\n                        required \n                        value = {text}\n                        onChange = {e => setText(e.target.value)}\n                        style = {{height: '75px', resize: 'none'}} \n                        className = {`${theme.textAreaColor}`}   \n                        />\n                        <InputGroup.Append>\n                            <Button type = 'submit' className = {`${theme.sendButtonColor}`}>Send</Button>\n                        </InputGroup.Append>\n                    </InputGroup>\n                </Form.Group>\n            </Form>\n        </div>\n        :\n        <div>\n            No conversation opened\n        </div>\n    )\n}\n","/Users/lamdaoletung/src/messenger_clone/messenger_clone_client/src/components/dashboard/sidebar/ConversationList.js",[],{"ruleId":"71","severity":1,"message":"72","line":6,"column":22,"nodeType":"73","messageId":"74","endLine":6,"endColumn":37},{"ruleId":"75","replacedBy":"76"},{"ruleId":"77","replacedBy":"78"},{"ruleId":"71","severity":1,"message":"79","line":1,"column":16,"nodeType":"73","messageId":"74","endLine":1,"endColumn":24},{"ruleId":"71","severity":1,"message":"80","line":1,"column":26,"nodeType":"73","messageId":"74","endLine":1,"endColumn":37},{"ruleId":"71","severity":1,"message":"81","line":3,"column":34,"nodeType":"73","messageId":"74","endLine":3,"endColumn":37},{"ruleId":"82","severity":1,"message":"83","line":55,"column":6,"nodeType":"84","endLine":55,"endColumn":66,"suggestions":"85"},{"ruleId":"75","replacedBy":"86"},{"ruleId":"77","replacedBy":"87"},{"ruleId":"71","severity":1,"message":"72","line":6,"column":22,"nodeType":"73","messageId":"74","endLine":6,"endColumn":37},{"ruleId":"82","severity":1,"message":"88","line":32,"column":6,"nodeType":"84","endLine":32,"endColumn":14,"suggestions":"89"},{"ruleId":"71","severity":1,"message":"90","line":16,"column":18,"nodeType":"73","messageId":"74","endLine":16,"endColumn":26},"no-unused-vars","'setRefreshToken' is assigned a value but never used.","Identifier","unusedVar","no-native-reassign",["91"],"no-negated-in-lhs",["92"],"'Children' is defined but never used.","'useCallback' is defined but never used.","'Col' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'joinCall'. Either include it or remove the dependency array.","ArrayExpression",["93"],["91"],["92"],"React Hook useEffect has a missing dependency: 'user'. Either include it or remove the dependency array.",["94"],"'contacts' is assigned a value but never used.","no-global-assign","no-unsafe-negation",{"desc":"95","fix":"96"},{"desc":"97","fix":"98"},"Update the dependencies array to be: [isVideoCallSocketConnected, user, setIsInitVideoCallSocket, joinCall]",{"range":"99","text":"100"},"Update the dependencies array to be: [user, userId]",{"range":"101","text":"102"},[1561,1621],"[isVideoCallSocketConnected, user, setIsInitVideoCallSocket, joinCall]",[976,984],"[user, userId]"]