[{"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/routes/LoginSecuredRoute.js":"1","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/routes/HomeSecuredRoute.js":"2","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/Register.js":"3","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/Login.js":"4","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/config.js":"5","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/Main.js":"6","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/hooks/useLocalStorage.js":"7","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/index.js":"8","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/nav_bar/LogOut.js":"9","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/DashBoard.js":"10","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/ConversationDetail.js":"11","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/SideBar.js":"12","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/ConversationList.js":"13","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/nav_bar/NavBar.js":"14","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/SocketProvider.js":"15","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/ContactList.js":"16","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/NewConversationModal.js":"17","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/NewContactModal.js":"18","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/nav_bar/UserInfo.js":"19","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/ConversationProvider.js":"20","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/AuthProvider.js":"21","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/App.js":"22","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/UserProvider.js":"23","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/ThemeProvider.js":"24","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/Searchfield.js":"25","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/VideoCallProvider.js":"26","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/video_call/VideoCall.js":"27","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/video_call/Video.js":"28"},{"size":589,"mtime":1608106503000,"results":"29","hashOfConfig":"30"},{"size":619,"mtime":1608106509000,"results":"31","hashOfConfig":"30"},{"size":2240,"mtime":1611648632000,"results":"32","hashOfConfig":"30"},{"size":4110,"mtime":1616868107000,"results":"33","hashOfConfig":"30"},{"size":190,"mtime":1609987965000,"results":"34","hashOfConfig":"30"},{"size":300,"mtime":1610986233000,"results":"35","hashOfConfig":"30"},{"size":638,"mtime":1608060457000,"results":"36","hashOfConfig":"30"},{"size":423,"mtime":1609820464000,"results":"37","hashOfConfig":"30"},{"size":801,"mtime":1609258688000,"results":"38","hashOfConfig":"30"},{"size":354,"mtime":1610986236000,"results":"39","hashOfConfig":"30"},{"size":4901,"mtime":1616863256000,"results":"40","hashOfConfig":"30"},{"size":2551,"mtime":1609526645000,"results":"41","hashOfConfig":"30"},{"size":1367,"mtime":1610963380000,"results":"42","hashOfConfig":"30"},{"size":344,"mtime":1609820762000,"results":"43","hashOfConfig":"30"},{"size":2179,"mtime":1610418686000,"results":"44","hashOfConfig":"30"},{"size":531,"mtime":1609003340000,"results":"45","hashOfConfig":"30"},{"size":2256,"mtime":1610652648000,"results":"46","hashOfConfig":"30"},{"size":841,"mtime":1609821735000,"results":"47","hashOfConfig":"30"},{"size":275,"mtime":1609820824000,"results":"48","hashOfConfig":"30"},{"size":4546,"mtime":1616863484000,"results":"49","hashOfConfig":"30"},{"size":3029,"mtime":1610792432000,"results":"50","hashOfConfig":"30"},{"size":2244,"mtime":1610988525000,"results":"51","hashOfConfig":"30"},{"size":1105,"mtime":1610963410000,"results":"52","hashOfConfig":"30"},{"size":1018,"mtime":1609739255000,"results":"53","hashOfConfig":"30"},{"size":349,"mtime":1609821482000,"results":"54","hashOfConfig":"30"},{"size":4054,"mtime":1611654367000,"results":"55","hashOfConfig":"30"},{"size":2917,"mtime":1611657734000,"results":"56","hashOfConfig":"30"},{"size":1045,"mtime":1611657675000,"results":"57","hashOfConfig":"30"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"60","usedDeprecatedRules":"61"},"1fz6suq",{"filePath":"62","messages":"63","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"64","usedDeprecatedRules":"65"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"68","messages":"69","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"70"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"77"},{"filePath":"78","messages":"79","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"80","messages":"81","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"82"},{"filePath":"83","messages":"84","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"85","messages":"86","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"87"},{"filePath":"88","messages":"89","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"90","messages":"91","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"92","messages":"93","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"96","messages":"97","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"98","messages":"99","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"100","messages":"101","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"61"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"106","messages":"107","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"108","usedDeprecatedRules":"109"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"112","messages":"113","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"114","usedDeprecatedRules":"65"},{"filePath":"115","messages":"116","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"117","usedDeprecatedRules":"118"},{"filePath":"119","messages":"120","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"121","messages":"122","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"123","messages":"124","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"125","usedDeprecatedRules":"61"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/routes/LoginSecuredRoute.js",["128"],"import React from 'react'\nimport {Route, Redirect} from 'react-router-dom'\nimport useLocalStorage from '../hooks/useLocalStorage';\n\nexport default function LoginSecuredRoute({ children, ...rest }) {\n  let [refreshToken, setRefreshToken] = useLocalStorage('refresh_token', null) \n  return (\n      <Route\n        {...rest}\n        render={({ location }) =>\n          refreshToken !== null ? (\n            <Redirect\n              to={{\n                pathname: \"/\",\n                state: { from: location }\n              }}\n            />\n          ) : children\n        }\n      />\n    );\n}\n",["129","130"],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/routes/HomeSecuredRoute.js",["131"],"import React from 'react'\nimport {Route, Redirect} from 'react-router-dom'\nimport useLocalStorage from '../hooks/useLocalStorage';\n\nexport default function HomeSecuredRoute({ children, ...rest }) {\n  let [refreshToken, setRefreshToken] = useLocalStorage('refresh_token', null) \n  return (\n      <Route\n        {...rest}\n        render={({ location }) =>\n          refreshToken !== null ? (\n            children\n          ) : (\n            <Redirect\n              to={{\n                pathname: \"/login\",\n                state: { from: location }\n              }}\n            />\n          )\n        }\n      />\n    );\n}\n",["132","133"],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/Register.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/Login.js",["134","135"],"import React, {useRef, useState} from 'react'\nimport { Container, Button} from 'react-bootstrap'\nimport {Link} from 'react-router-dom'\nimport {useAuthContext} from '../contexts/AuthProvider'\nimport { Layout, Typography, Row, Col, Form, Input, Checkbox } from 'antd'\nimport 'antd/dist/antd.css'\n\nexport default function Login() {\n    const emailRef = useRef()\n    const passwordRef = useRef()\n    let [loginMessage, setLoginMessage] = useState('')\n\n    const {login} = useAuthContext()\n    \n    async function handleSubmit(e) {\n        e.preventDefault()\n        const body = {\n            email: emailRef.current.value,\n            password: passwordRef.current.value\n        }\n        const {status} = await login(body)\n        if(status === 'SUCCESS') {\n            window.location.href = '/'\n        }\n        if(status === 'ERROR') {\n            setLoginMessage('Failed to login')\n        }\n        if(status === 'LOADING') {\n            setLoginMessage('Logging in...')\n        }\n    }\n\n    const styles = {\n      layoutStyle: {\n        fontFamily: 'monospace',\n      },\n      titleStyle: {\n        margin: '15px',\n      },\n    }\n\n    const layout = {\n      labelCol: {\n        span: 8,\n      },\n      wrapperCol: {\n        span: 16,\n      },\n    };\n    const tailLayout = {\n      wrapperCol: {\n        offset: 8,\n        span: 16,\n      },\n    };\n    return (\n        <div>\n            <Layout style={styles.layoutStyle}>\n                <Layout.Content>\n                  <Row>\n                    <Col span={24}>\n                      <Typography.Title level={1} style={styles.titleStyle}>\n                        Welcome to Messenger\n                      </Typography.Title>\n                    </Col>\n                  </Row>\n                  \n                  <Form\n                    {...layout}\n                    name=\"basic\"\n                    initialValues={{\n                      remember: true,\n                    }}\n                  >\n                    <Form.Item\n                      label=\"Email\"\n                      name=\"email\"\n                      rules={[\n                        {\n                          required: true,\n                          message: 'Please input your username!',\n                        },\n                      ]}\n                    >\n                      <Input/>\n                    </Form.Item>\n\n                    <Form.Item\n                      label=\"Password\"\n                      name=\"password\"\n                      rules={[\n                        {\n                          required: true,\n                          message: 'Please input your password!',\n                        },\n                      ]}\n                    >\n                      <Input.Password/>\n                    </Form.Item>\n\n                    <Form.Item {...tailLayout} name=\"remember\" valuePropName=\"checked\">\n                      <Checkbox>Remember me</Checkbox>\n                    </Form.Item>\n\n                    <Form.Item {...tailLayout}>\n                      <Button type=\"primary\" htmlType=\"submit\">\n                        Submit\n                      </Button>\n                    </Form.Item>\n                  </Form>\n                  {/* <Form onSubmit = {handleSubmit}>\n                      <Form.Group>\n                          <Form.Label>Email</Form.Label>\n                          <Form.Control type = 'text' ref = {emailRef} required/>\n                      </Form.Group>\n\n                      <Form.Group>\n                          <Form.Label>Password</Form.Label>\n                          <Form.Control type = 'text' ref = {passwordRef} required/>\n                      </Form.Group>\n                      <Button type = 'submit'>Login</Button>\n                  </Form> */}\n                  <div>\n                    {loginMessage}\n                  </div>\n                  <Link to = '/register'>Register</Link>\n                </Layout.Content>\n                <Layout.Footer>\n                  \n                </Layout.Footer>                                \n            </Layout>\n        </div>\n    )\n}\n","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/config.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/Main.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/hooks/useLocalStorage.js",[],["136","137"],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/index.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/nav_bar/LogOut.js",[],["138","139"],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/DashBoard.js",["140"],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/ConversationDetail.js",["141","142"],"import React, {useState, useCallback} from 'react'\nimport {CLIENT_BASE_URL} from '../../config'\nimport {useThemeContext, themeOptions} from '../../contexts/ThemeProvider'\nimport {Form, InputGroup, Button, DropdownButton, Dropdown } from 'react-bootstrap'\nimport {useConversations} from '../../contexts/ConversationProvider'\nimport {useUserContext} from '../../contexts/UserProvider'\nimport {useVideoCallContext} from '../../contexts/VideoCallProvider'\n\nexport default function ConversationDetail() {\n    // set theme\n    const {theme, setTheme} = useThemeContext()\n    \n    // get conversation info\n    const {sendMessage, selectedConversationId, conversations} = useConversations()\n    const conversation = selectedConversationId === null ? null : conversations.find(conversation => conversation._id === selectedConversationId)\n    // get user info \n    const {user, contacts} = useUserContext()\n    const userId = user._id\n    // \n    const [text, setText] = useState('')\n\n    // scroll to last message sent\n    const setRef = useCallback(node => {\n        if(node) {\n            node.scrollIntoView({smooth : true})\n        }\n    },[])\n    \n    // send message when clicked 'Send' button\n    function handleSubmit(e) {\n        e.preventDefault()\n        if(text !== '') {\n            sendMessage(selectedConversationId, user, text)\n            setText('') \n        }\n    }\n    // join a video call\n    function handleClick(e) {\n        e.preventDefault()\n        window.open(CLIENT_BASE_URL + `/video-call/${selectedConversationId}`)    \n    }\n    return (\n        conversation ? \n\n        <div className = {`d-flex flex-column flex-grow-1 ${theme.backgroundColor}`} style = {{height: '100%'}}>\n            <div className = 'd-flex flex-row'>\n                <DropdownButton title = 'Choose your theme'>\n                    {\n                        themeOptions.map((theme, index) => {\n                            return (\n                            <Dropdown.Item key = {index} onClick = {() => {setTheme(theme)}}>{theme.name}</Dropdown.Item>                            )\n                        })\n                    }\n                </DropdownButton>\n                <Button onClick = {handleClick} disabled>Video Call</Button>\n            </div>\n            \n            <div className = 'flex-grow-1 overflow-auto'>\n                <div className = 'd-flex flex-column align-items-start justify-content-end px-3'>\n                    { \n                    conversation.messages.map((message, index) => {\n                        const lastMessage = conversation.messages.length - 1 === index\n                        const senderInfo = message.user\n                        const isSentFromMe = senderInfo._id === userId\n                        const {messageBody} = message\n                        return (\n                            <div \n                                ref = {lastMessage ? setRef : null}\n                                key = {index}\n                                className = {`my-1 d-flex flex-column ${isSentFromMe ? 'align-self-end align-items-end' : 'align-items-start'}`}\n                            >\n                                {\n                                    // set color of message box and sender's name depending on the sender (user or his/her contacts)\n                                }\n                                <div className = {`rounded px-2 py-1 \n                                                    ${isSentFromMe ? theme.myTextBoxColor : theme.otherTextBoxColor}`}\n                                >\n                                    {messageBody}\n                                </div>\n\n                                <div className = {`text-muted small ${isSentFromMe ? 'text-right' : ''}`}>\n                                    {isSentFromMe ? 'You' : senderInfo.name}\n                                </div>\n                            </div>\n                        )\n                    })\n                }\n                </div>\n            </div>  \n            <Form onSubmit = {handleSubmit}>\n                <Form.Group className = 'm-2'>\n                    <InputGroup>\n                        <Form.Control \n                        as = 'textarea'\n                        required \n                        value = {text}\n                        onChange = {e => setText(e.target.value)}\n                        style = {{height: '75px', resize: 'none'}} \n                        className = {`${theme.textAreaColor}`}   \n                        />\n                        <InputGroup.Append>\n                            <Button type = 'submit' className = {`${theme.buttonColor}`}>Send</Button>\n                        </InputGroup.Append>\n                    </InputGroup>\n                </Form.Group>\n            </Form>\n        </div>\n        :\n        <div>\n            No conversation opened\n        </div>\n    )\n}\n","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/SideBar.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/ConversationList.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/nav_bar/NavBar.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/SocketProvider.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/ContactList.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/NewConversationModal.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/NewContactModal.js",["143","144","145"],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/nav_bar/UserInfo.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/ConversationProvider.js",["146","147","148"],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/AuthProvider.js",["149"],"import React, {useContext, useState, useRef} from 'react'\nimport {AUTH_BASE_URL} from '../config'\nimport axios from 'axios'\nimport useLocalStorage from '../hooks/useLocalStorage'\n\n\nconst isTokenExpired = (token) => {\n    if(!token) return true\n    const decode = JSON.parse(atob(token.split('.')[1]))\n    const expiredDateInSec = decode.exp ? decode.exp : null\n    return expiredDateInSec ? expiredDateInSec * 1000 < Date.now() - 2000 : true\n}\n\nconst AuthContext = React.createContext()\nexport function useAuthContext() {\n    return useContext(AuthContext)\n}\nexport function AuthProvider({children}) {\n    \n    const [accessToken, setAccessToken] = useLocalStorage('access_token', null)\n    const [refreshToken, setRefreshToken] = useLocalStorage('refresh_token', null)\n    const isTokenUpdating = useRef(false)\n    // get accessToken\n    async function getAccessToken() {\n        if(!accessToken) return null\n        if(!isTokenUpdating.current && isTokenExpired(accessToken)) {\n            isTokenUpdating.current = true\n            await axios({\n                method: 'post',\n                url: AUTH_BASE_URL + '/auth/token',\n                data: {\n                    refreshToken\n                }\n            })\n            .then(data => {\n                const {accessToken} = data.data\n                setAccessToken(accessToken)\n            })\n            .catch(err => {\n                setAccessToken(null)\n            })\n            isTokenUpdating.current = false\n            return accessToken\n        }\n        return accessToken\n    }  \n    \n    // fetch api with accessToken\n    async function authFetch(request) {\n        const token = await getAccessToken()\n        request = request || {}\n        request.headers = {\n            ...request.headers,\n            'Authorization' : `Bearer ${token}`\n        }\n        return axios(request)\n    }\n\n    // login \n    async function login({email, password}) {\n        let status = 'LOADING'\n        await axios({\n\t\t\tmethod:'post',\n\t\t\turl:AUTH_BASE_URL +'/auth/login',\n\t\t\tdata: {email, password}\n        })\n        .then(data => {\n            const {accessToken, refreshToken} = data.data\n            setAccessToken(accessToken)\n            setRefreshToken(refreshToken)\n            status = 'SUCCESS'\n        })\n\t\t.catch(err => {\n\t\t\tstatus = 'ERROR'\n        })   \n        return {status} \n    }\n    // logout\n    async function logOut() {\n        let status = 'LOADING'\n        await axios({\n            method:'delete',\n            url:AUTH_BASE_URL + '/auth/logout',\n            data: {\n                refreshToken\n            }\n        })\n        .then(data => {\n            status = 'SUCCESS'\n            setRefreshToken(null)\n        })\n        .catch(err => {\n            status = 'ERROR'\n        })\n        return {status}\n    }\n    const value = {\n       login,\n       logOut,\n       getAccessToken,\n       authFetch\n    }\n    return (\n        <AuthContext.Provider value = {value}>\n                {children}\n        </AuthContext.Provider>\n    )\n}\n\n",["150","151"],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/App.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/UserProvider.js",["152","153"],"import React, {useEffect, useState, useContext, useCallback} from 'react'\nimport {useAuthContext} from './AuthProvider'\nimport {AUTH_BASE_URL} from '../config'\n\nconst UserContext = React.createContext()\nexport function useUserContext() {\n    return useContext(UserContext)\n}\nexport function UserProvider({children}) {\n    // Each user has props: _id, name, email\n    console.log('user render');\n    const {authFetch} = useAuthContext()\n    const [user, setUser] = useState({})\n    const [contacts, setContacts] = useState([])\n    useEffect(() => {\n        console.log('fetch user');\n        authFetch({\n            method: 'get',\n            url: AUTH_BASE_URL + '/user'\n        })\n        .then(data => {\n            const {contacts,...user} = data.data\n            setUser(user)\n            setContacts(contacts)\n        })\n        .catch(err => {\n            setUser({})\n            setContacts([])\n        })\n    },[])\n\n    const value = {\n        user,\n        contacts,\n    }\n    return (\n        <UserContext.Provider value = {value}>\n            {children}\n        </UserContext.Provider>\n    )\n}\n","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/ThemeProvider.js",["154","155"],"import React, {Children, useCallback, useContext, useState} from 'react'\n\nconst ThemeContext = React.createContext()\n\nexport const themeOptions = [\n    {\n        name: 'Light',\n        backgroundColor: 'bg-light',\n        myTextBoxColor: 'bg-primary text-light',\n        otherTextBoxColor:'bg-secondary text-light',\n        buttonColor:'bg-primary text-light',\n        textAreaColor: 'bg-light'\n    },\n    {\n        name: 'Dark',\n        backgroundColor: 'bg-dark',\n        myTextBoxColor: 'bg-danger text-light',\n        otherTextBoxColor: 'bg-secondary text-light',\n        buttonColor:'bg-dark text-light',\n        textAreaColor: 'bg-secondary'\n    }\n]\nexport function useThemeContext() {\n    return useContext(ThemeContext)\n}\nexport function ThemeProvider({children}) {\n    const [theme, setTheme] = useState(themeOptions[0])\n    \n    const value = {\n        theme,\n        setTheme\n    }\n    return (\n        <ThemeContext.Provider value = {value}>\n            {children}\n        </ThemeContext.Provider>\n    )\n}\n",["156","157"],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/dashboard/sidebar/Searchfield.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/contexts/VideoCallProvider.js",[],"/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/video_call/VideoCall.js",["158","159"],"import React, { useEffect, useState } from \"react\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { Button, Container, Row, Col } from \"react-bootstrap\";\nimport { useVideoCallContext } from \"../../contexts/VideoCallProvider\";\nimport { useSocket } from \"../../contexts/SocketProvider\";\nimport { useUserContext } from \"../../contexts/UserProvider\";\nimport Video from \"./Video\";\n\n\nconst ControlButton = ({iconName, text, classAtr, ...otherAtr}) => {\n  return (\n    <Button\n      {...otherAtr}\n      className={`d-flex flex-column justify-content-center align-items-center px-4 py-1 mx-2 bg-dark border-0 ${classAtr}`}\n    >\n    <FontAwesomeIcon icon={iconName} />\n    <span>{text}</span>\n  </Button>\n)\n}\nexport default function VideoCall() {\n  const { streams, joinCall } = useVideoCallContext();\n  const [myStream, ...otherStreams] = streams\n  const { user } = useUserContext();\n  const { isVideoCallSocketConnected, setIsInitVideoCallSocket } = useSocket();\n  const [isMute, setIsMute] = useState(true)\n  const [isVideoStop, setIsVideoStop] = useState(false)\n  function muteAndUnmute(e) {\n    e.preventDefault()\n    setIsMute((isMute) => {\n      return !isMute\n    })\n  }\n\n  function playAndStopVideo(e) {\n    e.preventDefault()\n    setIsVideoStop((isVideoStop) => {\n      return !isVideoStop\n    })\n  }\n\n  function viewParticipants() {\n\n  }\n\n  function leaveCall() {\n    window.close()\n  }\n\n  useEffect(() => {\n    setIsInitVideoCallSocket(true);\n    if (isVideoCallSocketConnected && user._id) {\n      joinCall(user._id);\n    }\n  }, [isVideoCallSocketConnected, user, setIsInitVideoCallSocket]);\n\n  return (\n    <Container className =\"d-flex flex-column\">\n      <Row className=\"d-flex mb-3\">\n          <div className = 'd-flex justify-content-center py-3' style = {{height: '90vh'}}>\n            {otherStreams.length > 0 && otherStreams.map((stream, index) => {\n              return <Video key={index} stream={stream}/>;\n            })}\n          <Video stream={myStream} muted = 'true' isMute = {isMute} isVideoStop = {isVideoStop} />\n          </div>\n      </Row>\n      <Row className=\"d-flex bg-dark text-white\">\n          <ControlButton\n            iconName = {isMute ? 'microphone-slash' : 'microphone'}\n            text = {isMute ? 'Unmute' : 'Mute'}\n            onClick = {muteAndUnmute}\n          />\n\n          <ControlButton\n            iconName = {isVideoStop ? 'video-slash' : 'video'}\n            text = {isVideoStop ? 'Play Video' : 'Stop Video'}\n            onClick = {playAndStopVideo}\n          />\n        \n          <ControlButton\n            iconName = 'users'\n            text = 'Participants'\n            onClick = {viewParticipants}\n          />\n        \n          <ControlButton\n            iconName = 'door-open'\n            text = 'Leave call'\n            classAtr = 'text-danger'\n            onClick = {leaveCall}\n          />\n      </Row>\n    </Container>\n  );\n}\n","/Volumes/Tung Lam Data/Personal Projects/messenger_clone/frontend/src/components/video_call/Video.js",["160"],{"ruleId":"161","severity":1,"message":"162","line":6,"column":22,"nodeType":"163","messageId":"164","endLine":6,"endColumn":37},{"ruleId":"165","replacedBy":"166"},{"ruleId":"167","replacedBy":"168"},{"ruleId":"161","severity":1,"message":"162","line":6,"column":22,"nodeType":"163","messageId":"164","endLine":6,"endColumn":37},{"ruleId":"165","replacedBy":"169"},{"ruleId":"167","replacedBy":"170"},{"ruleId":"161","severity":1,"message":"171","line":2,"column":10,"nodeType":"163","messageId":"164","endLine":2,"endColumn":19},{"ruleId":"161","severity":1,"message":"172","line":15,"column":20,"nodeType":"163","messageId":"164","endLine":15,"endColumn":32},{"ruleId":"165","replacedBy":"173"},{"ruleId":"167","replacedBy":"174"},{"ruleId":"165","replacedBy":"175"},{"ruleId":"167","replacedBy":"176"},{"ruleId":"161","severity":1,"message":"177","line":4,"column":14,"nodeType":"163","messageId":"164","endLine":4,"endColumn":17},{"ruleId":"161","severity":1,"message":"178","line":7,"column":9,"nodeType":"163","messageId":"164","endLine":7,"endColumn":28},{"ruleId":"161","severity":1,"message":"179","line":17,"column":18,"nodeType":"163","messageId":"164","endLine":17,"endColumn":26},{"ruleId":"161","severity":1,"message":"180","line":4,"column":12,"nodeType":"163","messageId":"164","endLine":4,"endColumn":22},{"ruleId":"161","severity":1,"message":"181","line":4,"column":24,"nodeType":"163","messageId":"164","endLine":4,"endColumn":37},{"ruleId":"161","severity":1,"message":"182","line":5,"column":27,"nodeType":"163","messageId":"164","endLine":5,"endColumn":43},{"ruleId":"161","severity":1,"message":"183","line":2,"column":8,"nodeType":"163","messageId":"164","endLine":2,"endColumn":13},{"ruleId":"184","severity":1,"message":"185","line":39,"column":7,"nodeType":"186","endLine":39,"endColumn":9,"suggestions":"187"},{"ruleId":"184","severity":1,"message":"188","line":103,"column":8,"nodeType":"186","endLine":103,"endColumn":26,"suggestions":"189"},{"ruleId":"161","severity":1,"message":"190","line":1,"column":28,"nodeType":"163","messageId":"164","endLine":1,"endColumn":36},{"ruleId":"165","replacedBy":"191"},{"ruleId":"167","replacedBy":"192"},{"ruleId":"161","severity":1,"message":"193","line":1,"column":49,"nodeType":"163","messageId":"164","endLine":1,"endColumn":60},{"ruleId":"184","severity":1,"message":"185","line":30,"column":7,"nodeType":"186","endLine":30,"endColumn":9,"suggestions":"194"},{"ruleId":"161","severity":1,"message":"195","line":1,"column":16,"nodeType":"163","messageId":"164","endLine":1,"endColumn":24},{"ruleId":"161","severity":1,"message":"193","line":1,"column":26,"nodeType":"163","messageId":"164","endLine":1,"endColumn":37},{"ruleId":"165","replacedBy":"196"},{"ruleId":"167","replacedBy":"197"},{"ruleId":"161","severity":1,"message":"177","line":3,"column":34,"nodeType":"163","messageId":"164","endLine":3,"endColumn":37},{"ruleId":"184","severity":1,"message":"198","line":55,"column":6,"nodeType":"186","endLine":55,"endColumn":66,"suggestions":"199"},{"ruleId":"184","severity":1,"message":"200","line":20,"column":8,"nodeType":"186","endLine":20,"endColumn":27,"suggestions":"201"},"no-unused-vars","'setRefreshToken' is assigned a value but never used.","Identifier","unusedVar","no-native-reassign",["202"],"no-negated-in-lhs",["203"],["202"],["203"],"'Container' is defined but never used.","'handleSubmit' is defined but never used.",["202"],["203"],["202"],["203"],"'Col' is defined but never used.","'useVideoCallContext' is defined but never used.","'contacts' is assigned a value but never used.","'searchWord' is assigned a value but never used.","'setSearchWord' is assigned a value but never used.","'setSearchResults' is assigned a value but never used.","'axios' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'authFetch'. Either include it or remove the dependency array.","ArrayExpression",["204"],"React Hook useCallback has a missing dependency: 'userInfo'. Either include it or remove the dependency array.",["205"],"'useState' is defined but never used.",["202"],["203"],"'useCallback' is defined but never used.",["206"],"'Children' is defined but never used.",["202"],["203"],"React Hook useEffect has a missing dependency: 'joinCall'. Either include it or remove the dependency array.",["207"],"React Hook useEffect has missing dependencies: 'props.isMute' and 'props.stream'. Either include them or remove the dependency array.",["208"],"no-global-assign","no-unsafe-negation",{"desc":"209","fix":"210"},{"desc":"211","fix":"212"},{"desc":"209","fix":"213"},{"desc":"214","fix":"215"},{"desc":"216","fix":"217"},"Update the dependencies array to be: [authFetch]",{"range":"218","text":"219"},"Update the dependencies array to be: [userInfo]",{"range":"220","text":"221"},{"range":"222","text":"219"},"Update the dependencies array to be: [isVideoCallSocketConnected, user, setIsInitVideoCallSocket, joinCall]",{"range":"223","text":"224"},"Update the dependencies array to be: [props.isMute, props.isVideoStop, props.stream]",{"range":"225","text":"226"},[1225,1227],"[authFetch]",[3581,3599],"[userInfo]",[919,921],[1561,1621],"[isVideoCallSocketConnected, user, setIsInitVideoCallSocket, joinCall]",[712,731],"[props.isMute, props.isVideoStop, props.stream]"]